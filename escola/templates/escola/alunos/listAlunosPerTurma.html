{% extends "../base.html" %}
{% load guardian_tags %}

{%block conteudo%}
<div class="container">
<h1>Listagem de Alunos da turma {{turma.numero}}</h1>
{% get_obj_perms user for turma as "turma_perm" %}

{%if 'can_add_aluno' in turma_perm%}
    <a href="{% url 'escola:add-aluno' turma.pk %}" class="btn btn-primary">Adicionar Aluno</a>
    <br/><br/>
{%endif%}
<div class="table-responsive">
    <table class="table table-striped">
    <tr>
        <th>Num.</th>
        <th>Nome de Usuario</th>
        <th>Nome</th>
        {%if perms.escola.can_edit_aluno%}
        <th></th>
        {%endif%}
        {%if perms.escola.can_delete_aluno%}
        <th></th>
        {%endif%}
    </tr>
    {%for aluno in alunos%}
    <tr>
        <th>{{aluno.chamada}}</th>
        <th>{{aluno.user.username}}</th>
        <th>{{aluno.nome}}</th>
        {%if perms.escola.can_edit_aluno%}
        <th><a href="{% url 'escola:edit-aluno' aluno.pk %}" class="btn btn-primary">Editar</a></th>
        {%endif%}
        {%if perms.escola.can_delete_aluno%}
        <th><a href="{% url 'escola:delete-aluno' aluno.pk %}" class="btn btn-danger">Apagar</a></th>
        {%endif%}
    </tr>
    {%endfor%}
    </table>
    </div>
</div>
{%endblock%}